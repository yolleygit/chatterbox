# è¯­éŸ³å…‹éš†å®Œæ•´æŒ‡å—

## ğŸ“š ç›®å½•
- [ä»€ä¹ˆæ˜¯è¯­éŸ³å…‹éš†](#ä»€ä¹ˆæ˜¯è¯­éŸ³å…‹éš†)
- [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
- [è¯¦ç»†æ•™ç¨‹](#è¯¦ç»†æ•™ç¨‹)
- [å‚æ•°è°ƒä¼˜](#å‚æ•°è°ƒä¼˜)
- [é«˜çº§æŠ€å·§](#é«˜çº§æŠ€å·§)
- [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
- [åº”ç”¨åœºæ™¯](#åº”ç”¨åœºæ™¯)

## ä»€ä¹ˆæ˜¯è¯­éŸ³å…‹éš†

è¯­éŸ³å…‹éš†æ˜¯ä¸€ç§AIæŠ€æœ¯ï¼Œé€šè¿‡åˆ†æå‚è€ƒéŸ³é¢‘æ–‡ä»¶ä¸­çš„å£°éŸ³ç‰¹å¾ï¼Œç„¶åä½¿ç”¨è¿™äº›ç‰¹å¾æ¥åˆæˆæ–°çš„è¯­éŸ³å†…å®¹ã€‚ç®€å•æ¥è¯´ï¼š

**å‚è€ƒéŸ³é¢‘ + æ–°æ–‡æœ¬ â†’ ç”¨å‚è€ƒå£°éŸ³è¯´æ–°å†…å®¹**

### å·¥ä½œåŸç†
```
å‚è€ƒéŸ³é¢‘æ–‡ä»¶ â†’ å£°éŸ³ç‰¹å¾æå– â†’ ç‰¹å¾å­¦ä¹  â†’ æ–°æ–‡æœ¬åˆæˆ â†’ å…‹éš†è¯­éŸ³è¾“å‡º
```

## å¿«é€Ÿå¼€å§‹

### 1. å‡†å¤‡å‚è€ƒéŸ³é¢‘
- **æ—¶é•¿**: 3-10ç§’ï¼ˆæ¨è5-8ç§’ï¼‰
- **æ ¼å¼**: WAV, MP3, FLAC, M4Aç­‰
- **è´¨é‡**: æ¸…æ™°ã€æ— èƒŒæ™¯å™ªéŸ³
- **å†…å®¹**: è‡ªç„¶è¯´è¯ï¼Œé¿å…æœ—è¯»è…”è°ƒ
- **é‡‡æ ·ç‡**: 16kHzæˆ–æ›´é«˜

### 2. è¿è¡Œå¿«é€Ÿç¤ºä¾‹
```bash
python examples/basic/quick_voice_cloning.py
```

### 3. æ”¾ç½®éŸ³é¢‘æ–‡ä»¶
å°†å‚è€ƒéŸ³é¢‘æ–‡ä»¶å‘½åä¸ºä»¥ä¸‹ä»»ä¸€åç§°ï¼Œæ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•ï¼š
- `voice_sample.wav`
- `reference.wav`
- `audio_sample.wav`
- `my_voice.wav`

## è¯¦ç»†æ•™ç¨‹

### åŸºç¡€è¯­éŸ³å…‹éš†ä»£ç 

```python
import torch
import torchaudio as ta
from chatterbox.tts import ChatterboxTTS

# åŠ è½½æ¨¡å‹
model = ChatterboxTTS.from_pretrained(device="cpu")

# è¯­éŸ³å…‹éš†
wav = model.generate(
    text="è¦åˆæˆçš„æ–‡æœ¬å†…å®¹",
    audio_prompt_path="å‚è€ƒéŸ³é¢‘æ–‡ä»¶.wav",  # å…³é”®å‚æ•°
    exaggeration=0.7,    # æƒ…æ„Ÿè¡¨è¾¾åº¦
    cfg_weight=0.8,      # ç›¸ä¼¼åº¦æ§åˆ¶
    temperature=0.7      # éšæœºæ€§æ§åˆ¶
)

# ä¿å­˜ç»“æœ
ta.save("è¾“å‡ºæ–‡ä»¶.wav", wav, model.sr)
```

### æ ¸å¿ƒå‚æ•°è¯´æ˜

#### `audio_prompt_path` (å¿…éœ€)
- **ä½œç”¨**: æŒ‡å®šå‚è€ƒéŸ³é¢‘æ–‡ä»¶è·¯å¾„
- **æ ¼å¼**: æ”¯æŒWAV, MP3, FLACç­‰
- **ç¤ºä¾‹**: `"voice_sample.wav"`

#### `cfg_weight` (é‡è¦)
- **ä½œç”¨**: æ§åˆ¶ç”Ÿæˆè¯­éŸ³ä¸å‚è€ƒéŸ³é¢‘çš„ç›¸ä¼¼åº¦
- **èŒƒå›´**: 0.1 - 1.0
- **æ¨èå€¼**: 0.7 - 0.8
- **æ•ˆæœ**:
  - `0.3-0.5`: æ›´æœ‰åˆ›æ„ï¼Œå˜åŒ–è¾ƒå¤§
  - `0.6-0.8`: å¹³è¡¡ï¼Œæ¨èä½¿ç”¨
  - `0.8-1.0`: æ›´ç›¸ä¼¼ï¼Œæ›´ä¸€è‡´

#### `exaggeration` (æƒ…æ„Ÿ)
- **ä½œç”¨**: æ§åˆ¶æƒ…æ„Ÿè¡¨è¾¾å¼ºåº¦
- **èŒƒå›´**: 0.1 - 2.0
- **æ¨èå€¼**: 0.5 - 0.8
- **æ•ˆæœ**:
  - `0.1-0.4`: å¹³æ·¡ï¼Œé€‚åˆæ­£å¼åœºåˆ
  - `0.5-0.8`: è‡ªç„¶ï¼Œæ—¥å¸¸ä½¿ç”¨
  - `0.9-2.0`: å¤¸å¼ ï¼Œæˆå‰§è¡¨æ¼”

#### `temperature` (éšæœºæ€§)
- **ä½œç”¨**: æ§åˆ¶ç”Ÿæˆçš„éšæœºæ€§å’Œå¤šæ ·æ€§
- **èŒƒå›´**: 0.1 - 2.0
- **æ¨èå€¼**: 0.6 - 1.0
- **æ•ˆæœ**:
  - `0.1-0.5`: ç¨³å®šï¼Œé‡å¤æ€§å¥½
  - `0.6-1.0`: å¹³è¡¡ï¼Œæ¨èä½¿ç”¨
  - `1.1-2.0`: å¤šæ ·ï¼Œæ¯æ¬¡ä¸åŒ

## å‚æ•°è°ƒä¼˜

### æ¨èå‚æ•°ç»„åˆ

#### ğŸ¯ é«˜è´¨é‡å…‹éš† (æœ€ä½³ç›¸ä¼¼åº¦)
```python
wav = model.generate(
    text="...",
    audio_prompt_path="reference.wav",
    cfg_weight=0.9,      # é«˜ç›¸ä¼¼åº¦
    exaggeration=0.5,    # ä½æƒ…æ„Ÿè¡¨è¾¾
    temperature=0.6      # ä½éšæœºæ€§
)
```

#### ğŸ­ è¡¨æ¼”åˆ›ä½œ (è¡¨ç°åŠ›å¼º)
```python
wav = model.generate(
    text="...",
    audio_prompt_path="reference.wav",
    cfg_weight=0.6,      # ä¸­ç­‰ç›¸ä¼¼åº¦
    exaggeration=1.2,    # é«˜æƒ…æ„Ÿè¡¨è¾¾
    temperature=1.0      # ä¸­ç­‰éšæœºæ€§
)
```

#### ğŸ“š éŸ³é¢‘ä¹¦åˆ¶ä½œ (ç¨³å®šä¸€è‡´)
```python
wav = model.generate(
    text="...",
    audio_prompt_path="reference.wav",
    cfg_weight=0.8,      # é«˜ç›¸ä¼¼åº¦
    exaggeration=0.4,    # ä½æƒ…æ„Ÿè¡¨è¾¾
    temperature=0.5      # ä½éšæœºæ€§
)
```

#### ğŸµ åˆ›æ„å†…å®¹ (å¤šæ ·åŒ–)
```python
wav = model.generate(
    text="...",
    audio_prompt_path="reference.wav",
    cfg_weight=0.5,      # ä½ç›¸ä¼¼åº¦
    exaggeration=0.8,    # ä¸­é«˜æƒ…æ„Ÿè¡¨è¾¾
    temperature=1.2      # é«˜éšæœºæ€§
)
```

### å‚æ•°è°ƒä¼˜ç­–ç•¥

1. **ä»æ¨èå€¼å¼€å§‹**: cfg_weight=0.7, exaggeration=0.6, temperature=0.7
2. **é€ä¸ªè°ƒæ•´**: å…ˆè°ƒcfg_weightï¼Œå†è°ƒå…¶ä»–å‚æ•°
3. **å°æ­¥è°ƒæ•´**: æ¯æ¬¡è°ƒæ•´0.1-0.2
4. **å¤šæ¬¡æµ‹è¯•**: åŒæ ·å‚æ•°è¿è¡Œå¤šæ¬¡ï¼Œè§‚å¯Ÿç¨³å®šæ€§
5. **è®°å½•æœ€ä½³**: æ‰¾åˆ°æ»¡æ„æ•ˆæœåè®°å½•å‚æ•°ç»„åˆ

## é«˜çº§æŠ€å·§

### 1. éŸ³é¢‘æ–‡ä»¶ä¼˜åŒ–

#### å½•åˆ¶é«˜è´¨é‡å‚è€ƒéŸ³é¢‘
```bash
# ä½¿ç”¨Macå†…ç½®å·¥å…·å½•åˆ¶
# QuickTime Player â†’ æ–‡ä»¶ â†’ æ–°å»ºéŸ³é¢‘å½•åˆ¶
# è®¾ç½®ï¼šé«˜è´¨é‡ã€æ— å‹ç¼©
```

#### éŸ³é¢‘é¢„å¤„ç†
```python
import librosa
import soundfile as sf

# è¯»å–éŸ³é¢‘
audio, sr = librosa.load("åŸå§‹éŸ³é¢‘.wav", sr=22050)

# éŸ³é¢‘å½’ä¸€åŒ–
audio = audio / np.max(np.abs(audio))

# ç§»é™¤é™éŸ³
audio_trimmed, _ = librosa.effects.trim(audio, top_db=20)

# ä¿å­˜å¤„ç†åéŸ³é¢‘
sf.write("å¤„ç†åéŸ³é¢‘.wav", audio_trimmed, sr)
```

### 2. æ‰¹é‡è¯­éŸ³å…‹éš†

```python
def batch_voice_clone(texts, reference_audio, output_dir):
    """æ‰¹é‡è¯­éŸ³å…‹éš†"""
    model = ChatterboxTTS.from_pretrained(device="cpu")
    
    for i, text in enumerate(texts):
        wav = model.generate(
            text=text,
            audio_prompt_path=reference_audio,
            cfg_weight=0.8,
            exaggeration=0.6,
            temperature=0.7
        )
        
        output_path = f"{output_dir}/segment_{i+1:03d}.wav"
        ta.save(output_path, wav, model.sr)
        print(f"âœ… å®Œæˆç¬¬{i+1}æ®µ: {output_path}")

# ä½¿ç”¨ç¤ºä¾‹
texts = [
    "ç¬¬ä¸€æ®µæ–‡æœ¬å†…å®¹",
    "ç¬¬äºŒæ®µæ–‡æœ¬å†…å®¹", 
    "ç¬¬ä¸‰æ®µæ–‡æœ¬å†…å®¹"
]

batch_voice_clone(texts, "reference.wav", "output/batch_cloning/")
```

### 3. éŸ³é¢‘æ‹¼æ¥

```python
import torchaudio as ta
import torch

def concatenate_audios(audio_files, output_path):
    """æ‹¼æ¥å¤šä¸ªéŸ³é¢‘æ–‡ä»¶"""
    audio_tensors = []
    
    for file in audio_files:
        audio, sr = ta.load(file)
        audio_tensors.append(audio)
    
    # æ‹¼æ¥éŸ³é¢‘
    combined_audio = torch.cat(audio_tensors, dim=1)
    
    # ä¿å­˜ç»“æœ
    ta.save(output_path, combined_audio, sr)
    print(f"âœ… éŸ³é¢‘æ‹¼æ¥å®Œæˆ: {output_path}")

# ä½¿ç”¨ç¤ºä¾‹
audio_files = [
    "output/cloned_1.wav",
    "output/cloned_2.wav", 
    "output/cloned_3.wav"
]
concatenate_audios(audio_files, "output/complete_story.wav")
```

## å¸¸è§é—®é¢˜

### Q1: ç”Ÿæˆçš„è¯­éŸ³ä¸åƒå‚è€ƒéŸ³é¢‘ï¼Ÿ
**A1**: è°ƒæ•´å‚æ•°è§£å†³
- æé«˜ `cfg_weight` åˆ° 0.8-0.9
- é™ä½ `temperature` åˆ° 0.5-0.7
- æ£€æŸ¥å‚è€ƒéŸ³é¢‘è´¨é‡

### Q2: è¯­éŸ³å¬èµ·æ¥å¾ˆæœºæ¢°ï¼Ÿ
**A2**: å¢åŠ è‡ªç„¶åº¦
- æé«˜ `exaggeration` åˆ° 0.6-0.8
- æé«˜ `temperature` åˆ° 0.8-1.0
- ä½¿ç”¨æ›´è‡ªç„¶çš„å‚è€ƒéŸ³é¢‘

### Q3: æ¯æ¬¡ç”Ÿæˆç»“æœéƒ½ä¸ä¸€æ ·ï¼Ÿ
**A3**: æé«˜ä¸€è‡´æ€§
- é™ä½ `temperature` åˆ° 0.5ä»¥ä¸‹
- æé«˜ `cfg_weight` åˆ° 0.8+
- å›ºå®šéšæœºç§å­

### Q4: å‚è€ƒéŸ³é¢‘æ ¼å¼ä¸æ”¯æŒï¼Ÿ
**A4**: è½¬æ¢éŸ³é¢‘æ ¼å¼
```bash
# ä½¿ç”¨FFmpegè½¬æ¢
ffmpeg -i input.mp3 -ar 22050 -ac 1 output.wav

# æˆ–ä½¿ç”¨Python
import librosa
import soundfile as sf

audio, sr = librosa.load("input.mp3", sr=22050)
sf.write("output.wav", audio, sr)
```

### Q5: ç”Ÿæˆé€Ÿåº¦å¾ˆæ…¢ï¼Ÿ
**A5**: ä¼˜åŒ–æ€§èƒ½
- å‡å°‘çº¿ç¨‹æ•°: `torch.set_num_threads(4)`
- ä½¿ç”¨è¾ƒçŸ­çš„å‚è€ƒéŸ³é¢‘
- å‡å°‘ç”Ÿæˆæ–‡æœ¬é•¿åº¦

### Q6: ä¸­æ–‡è¯­éŸ³å…‹éš†æ•ˆæœä¸å¥½ï¼Ÿ
**A6**: ç‰¹æ®Šå¤„ç†
- ä½¿ç”¨ä¸­æ–‡å‚è€ƒéŸ³é¢‘
- å‚è€ƒ: `ä¸­æ–‡è¯­éŸ³åˆæˆè§£å†³æ–¹æ¡ˆ.md`
- ä½¿ç”¨ä¸­æ–‡ä¸“ç”¨å‚æ•°

## åº”ç”¨åœºæ™¯

### 1. ğŸ“– æœ‰å£°ä¹¦åˆ¶ä½œ
```python
# é•¿æ–‡æœ¬åˆ†æ®µå¤„ç†
chapters = ["ç¬¬ä¸€ç« å†…å®¹...", "ç¬¬äºŒç« å†…å®¹...", "ç¬¬ä¸‰ç« å†…å®¹..."]
for i, chapter in enumerate(chapters):
    wav = model.generate(
        text=chapter,
        audio_prompt_path="narrator_voice.wav",
        cfg_weight=0.8,      # ä¿æŒä¸€è‡´æ€§
        exaggeration=0.5,    # é€‚ä¸­çš„è¡¨è¾¾
        temperature=0.6      # ç¨³å®šè¾“å‡º
    )
    ta.save(f"audiobook_chapter_{i+1}.wav", wav, model.sr)
```

### 2. ğŸ¬ è§†é¢‘é…éŸ³
```python
# ä¸ºè§†é¢‘åˆ¶ä½œé…éŸ³
dialogue_lines = [
    "è§’è‰²Açš„å°è¯",
    "è§’è‰²Bçš„å°è¯",
    "æ—ç™½å†…å®¹"
]

voice_refs = {
    "è§’è‰²A": "voice_a.wav",
    "è§’è‰²B": "voice_b.wav", 
    "æ—ç™½": "narrator.wav"
}

for i, line in enumerate(dialogue_lines):
    voice_ref = voice_refs.get(f"è§’è‰²{chr(65+i%2)}", "narrator.wav")
    wav = model.generate(
        text=line,
        audio_prompt_path=voice_ref,
        cfg_weight=0.7,
        exaggeration=0.8,    # æˆå‰§è¡¨ç°åŠ›
        temperature=0.8
    )
    ta.save(f"dialogue_{i+1}.wav", wav, model.sr)
```

### 3. ğŸ¤– ä¸ªæ€§åŒ–è¯­éŸ³åŠ©æ‰‹
```python
# åˆ›å»ºä¸ªäººè¯­éŸ³åŠ©æ‰‹
def create_personal_assistant_voice(user_voice_sample):
    """åˆ›å»ºä¸ªäººè¯­éŸ³åŠ©æ‰‹"""
    
    responses = [
        "æ‚¨å¥½ï¼Œæˆ‘æ˜¯æ‚¨çš„ä¸ªäººåŠ©æ‰‹",
        "ä»Šå¤©å¤©æ°”å¾ˆå¥½ï¼Œé€‚åˆå¤–å‡º",
        "æ‚¨æœ‰3æ¡æœªè¯»æ¶ˆæ¯",
        "æé†’æ‚¨ä¸‹åˆæœ‰ä¸ªé‡è¦ä¼šè®®"
    ]
    
    for i, response in enumerate(responses):
        wav = model.generate(
            text=response,
            audio_prompt_path=user_voice_sample,
            cfg_weight=0.9,      # é«˜ç›¸ä¼¼åº¦
            exaggeration=0.4,    # æ­£å¼è¯­è°ƒ
            temperature=0.5      # ç¨³å®šè¾“å‡º
        )
        ta.save(f"assistant_response_{i+1}.wav", wav, model.sr)

# ä½¿ç”¨ç”¨æˆ·å½•åˆ¶çš„è¯­éŸ³æ ·æœ¬
create_personal_assistant_voice("my_voice_sample.wav")
```

### 4. ğŸŒ å¤šè¯­è¨€å†…å®¹æœ¬åœ°åŒ–
```python
# å¤šè¯­è¨€é…éŸ³ï¼ˆéœ€è¦å¯¹åº”è¯­è¨€çš„å‚è€ƒéŸ³é¢‘ï¼‰
content = {
    "english": "Welcome to our service",
    "chinese": "æ¬¢è¿ä½¿ç”¨æˆ‘ä»¬çš„æœåŠ¡",
    "spanish": "Bienvenido a nuestro servicio"
}

voice_refs = {
    "english": "english_voice.wav",
    "chinese": "chinese_voice.wav", 
    "spanish": "spanish_voice.wav"
}

for lang, text in content.items():
    wav = model.generate(
        text=text,
        audio_prompt_path=voice_refs[lang],
        cfg_weight=0.8,
        exaggeration=0.6,
        temperature=0.7
    )
    ta.save(f"localized_{lang}.wav", wav, model.sr)
```

## ä¼¦ç†ä½¿ç”¨æŒ‡å—

### âš–ï¸ åˆæ³•ä½¿ç”¨åŸåˆ™
1. **è·å¾—æˆæƒ**: ä½¿ç”¨ä»–äººå£°éŸ³å‰éœ€è·å¾—æ˜ç¡®åŒæ„
2. **åˆæ³•ç›®çš„**: ä»…ç”¨äºåˆæ³•å’Œé“å¾·ç›®çš„
3. **é¿å…æ¬ºè¯ˆ**: ä¸ç”¨äºæ¬ºéª—æˆ–è¯¯å¯¼ä»–äºº
4. **å°Šé‡éšç§**: ä¸ä¾µçŠ¯ä»–äººéšç§æƒ
5. **éµå®ˆæ³•å¾‹**: éµå®ˆå½“åœ°æ³•å¾‹æ³•è§„

### ğŸš« ç¦æ­¢è¡Œä¸º
- å†’å……ä»–äººèº«ä»½
- åˆ¶ä½œè™šå‡ä¿¡æ¯
- ç”¨äºè¯ˆéª—æ´»åŠ¨
- ä¾µçŠ¯ç‰ˆæƒ
- æ¶æ„ä¼ æ’­

### âœ… æ¨èç”¨é€”
- ä¸ªäººåˆ›ä½œé¡¹ç›®
- æ•™è‚²åŸ¹è®­å†…å®¹
- æ— éšœç¢æœåŠ¡
- è‰ºæœ¯è¡¨æ¼”
- åˆæ³•å•†ä¸šç”¨é€”

## ç›¸å…³æ–‡ä»¶

- `examples/basic/quick_voice_cloning.py` - å¿«é€Ÿå…¥é—¨ç¤ºä¾‹
- `examples/advanced/voice_cloning_tutorial.py` - è¯¦ç»†æ•™ç¨‹
- `examples/basic/chinese_tts_example.py` - ä¸­æ–‡è¯­éŸ³å…‹éš†
- `ä¸­æ–‡è¯­éŸ³åˆæˆè§£å†³æ–¹æ¡ˆ.md` - ä¸­æ–‡ä¸“ç”¨è§£å†³æ–¹æ¡ˆ

## æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. éŸ³é¢‘æ–‡ä»¶æ ¼å¼å’Œè´¨é‡
2. å‚æ•°è®¾ç½®æ˜¯å¦åˆç†
3. æ¨¡å‹æ˜¯å¦æ­£ç¡®åŠ è½½
4. ç³»ç»Ÿå…¼å®¹æ€§

æ›´å¤šå¸®åŠ©è¯·å‚è€ƒé¡¹ç›®æ–‡æ¡£æˆ–æäº¤Issueã€‚ 